
> json-hub@0.1.0 test
> jest lib/parsers/flattener.test.ts

FAIL lib/parsers/flattener.test.ts
  flattener
    flattenJSON
      ΓêÜ should flatten a simple flat object (10 ms)
      ΓêÜ should flatten nested objects with dot notation (1 ms)
      ΓêÜ should handle arrays of objects (1 ms)
      ΓêÜ should serialize arrays of primitives as JSON strings (1 ms)
      ΓêÜ should handle arrays of nested objects (2 ms)
      ΓêÜ should fill missing columns with null (1 ms)
      ΓêÜ should handle deeply nested objects (1 ms)
      ΓêÜ should handle mixed data types (1 ms)
      ΓêÜ should handle empty array (1 ms)
      ΓêÜ should handle null input (1 ms)
      ΓêÜ should handle undefined input
      ΓêÜ should handle circular references
      ΓêÜ should handle large datasets efficiently (5 ms)
      ΓêÜ should handle objects with special characters in keys (1 ms)
      ΓêÜ should handle GeoJSON coordinates intelligently (2 ms)
      ΓêÜ should serialize nested arrays (1 ms)
      ΓêÜ should expand arrays of objects but serialize their primitive arrays (1 ms)
    inferSchema
      ΓêÜ should infer schema from array of objects
      ΓêÜ should limit sampling to specified size (1 ms)
      ΓêÜ should handle nested objects in schema inference (1 ms)
    unflattenObject
      ΓêÜ should unflatten a simple flat object (1 ms)
      ΓêÜ should unflatten nested objects
      ΓêÜ should unflatten arrays (1 ms)
      ├ù should roundtrip flatten and unflatten (6 ms)

  ΓùÅ flattener ΓÇ║ unflattenObject ΓÇ║ should roundtrip flatten and unflatten

    expect(received).toEqual(expected) // deep equality

    - Expected  - 4
    + Received  + 1

    @@ -1,10 +1,7 @@
      Object {
    -   "items": Array [
    -     "apple",
    -     "banana",
    -   ],
    +   "items": "\"apple\", \"banana\"",
        "user": Object {
          "address": Object {
            "city": "NYC",
            "zip": "10001",
          },

      366 |             const unflattened = unflattenObject(flattened.rows[0]);
      367 |
    > 368 |             expect(unflattened).toEqual(original);
          |                                 ^
      369 |         });
      370 |     });
      371 | });

      at Object.toEqual (lib/parsers/flattener.test.ts:368:33)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 23 passed, 24 total
Snapshots:   0 total
Time:        5.161 s
Ran all test suites matching /lib\\parsers\\flattener.test.ts/i.
